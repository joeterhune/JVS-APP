<VirtualHost *:80>
  ServerName jvs.circuit12.org
  DocumentRoot /var/jvs/public_html

  RewriteEngine On
  RewriteCond %{REQUEST_URI} ^/case
  RewriteCond %{HTTPS} !=on
  RewriteRule ^ https://jvs.circuit12.org%{REQUEST_URI} [L]
  RewriteCond %{REQUEST_URI} ^/cgi-bin/case
  RewriteCond %{HTTPS} !=on
  RewriteRule ^ https://jvs.circuit12.org%{REQUEST_URI} [L]

  SetEnv PATH /usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/root/bin

  Alias /caseinfo.cgi /var/jvs/icms/icms/cgi-bin/caseinfo.cgi
  PerlModule ModPerl::Registry
  PerlModule Apache::DBI

  ## Logging
  ErrorLog "/var/log/httpd/jvs.circuit12.org_error.log"
  ServerSignature Off
  CustomLog "/var/log/httpd/jvs.circuit12.org_access.log" combined

  <Directory "/var/jvs/icms/cgi-bin">
    SetHandler perl-script
    PerlResponseHandler ModPerl::Registry
    PerlOptions +ParseHeaders
    Options FollowSymLinks ExecCGI
  </Directory>

  <Directory "/var/jvs/icms-web/case">
    DirectoryIndex tabs.php
    AddHandler perl-script .pl .cgi
    PerlResponseHandler ModPerl::Registry
    PerlOptions +ParseHeaders
    Options FollowSymLinks ExecCGI
  </Directory>

  <Directory "/var/jvs/icms-web/case/casenotes">
    AddHandler perl-script .pl .cgi
    PerlResponseHandler ModPerl::Registry
    Options FollowSymLinks ExecCGI
  </Directory>

  <Directory /var/jvs/icms-web/case/caseinfo>
    Options -Indexes +ExecCGI
    AddHandler cgi-script .cgi
  </Directory>

</VirtualHost>
